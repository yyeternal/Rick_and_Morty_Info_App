{"version":3,"sources":["../../../../src/utils/remote-build-cache-providers/helpers.ts"],"sourcesContent":["import { RunOptions } from '@expo/config';\nimport fs from 'fs';\n\nimport { hasDirectDevClientDependency } from '../../start/detectDevClient';\n\nexport function isDevClientBuild({\n  runOptions,\n  projectRoot,\n}: {\n  runOptions: RunOptions;\n  projectRoot: string;\n}) {\n  if (!hasDirectDevClientDependency(projectRoot)) {\n    return false;\n  }\n\n  if ('variant' in runOptions && runOptions.variant !== undefined) {\n    return runOptions.variant === 'debug';\n  }\n  if ('configuration' in runOptions && runOptions.configuration !== undefined) {\n    return runOptions.configuration === 'Debug';\n  }\n\n  return true;\n}\n\nexport function moduleNameIsDirectFileReference(name: string): boolean {\n  // Check if path is a file. Matches lines starting with: . / ~/\n  if (name.match(/^(\\.|~\\/|\\/)/g)) {\n    return true;\n  }\n\n  const slashCount = name.split('/')?.length;\n  // Orgs (like @expo/config ) should have more than one slash to be a direct file.\n  if (name.startsWith('@')) {\n    return slashCount > 2;\n  }\n\n  // Regular packages should be considered direct reference if they have more than one slash.\n  return slashCount > 1;\n}\n\nexport function moduleNameIsPackageReference(name: string): boolean {\n  const slashCount = name.split('/')?.length;\n  return name.startsWith('@') ? slashCount === 2 : slashCount === 1;\n}\n\nexport function fileExists(file: string): boolean {\n  try {\n    return fs.statSync(file).isFile();\n  } catch {\n    return false;\n  }\n}\n"],"names":["fileExists","isDevClientBuild","moduleNameIsDirectFileReference","moduleNameIsPackageReference","runOptions","projectRoot","hasDirectDevClientDependency","variant","undefined","configuration","name","match","slashCount","split","length","startsWith","file","fs","statSync","isFile"],"mappings":";;;;;;;;;;;IA+CgBA,UAAU;eAAVA;;IA1CAC,gBAAgB;eAAhBA;;IAqBAC,+BAA+B;eAA/BA;;IAgBAC,4BAA4B;eAA5BA;;;;gEAzCD;;;;;;iCAE8B;;;;;;AAEtC,SAASF,iBAAiB,EAC/BG,UAAU,EACVC,WAAW,EAIZ;IACC,IAAI,CAACC,IAAAA,6CAA4B,EAACD,cAAc;QAC9C,OAAO;IACT;IAEA,IAAI,aAAaD,cAAcA,WAAWG,OAAO,KAAKC,WAAW;QAC/D,OAAOJ,WAAWG,OAAO,KAAK;IAChC;IACA,IAAI,mBAAmBH,cAAcA,WAAWK,aAAa,KAAKD,WAAW;QAC3E,OAAOJ,WAAWK,aAAa,KAAK;IACtC;IAEA,OAAO;AACT;AAEO,SAASP,gCAAgCQ,IAAY;QAMvCA;IALnB,+DAA+D;IAC/D,IAAIA,KAAKC,KAAK,CAAC,kBAAkB;QAC/B,OAAO;IACT;IAEA,MAAMC,cAAaF,cAAAA,KAAKG,KAAK,CAAC,yBAAXH,YAAiBI,MAAM;IAC1C,iFAAiF;IACjF,IAAIJ,KAAKK,UAAU,CAAC,MAAM;QACxB,OAAOH,aAAa;IACtB;IAEA,2FAA2F;IAC3F,OAAOA,aAAa;AACtB;AAEO,SAAST,6BAA6BO,IAAY;QACpCA;IAAnB,MAAME,cAAaF,cAAAA,KAAKG,KAAK,CAAC,yBAAXH,YAAiBI,MAAM;IAC1C,OAAOJ,KAAKK,UAAU,CAAC,OAAOH,eAAe,IAAIA,eAAe;AAClE;AAEO,SAASZ,WAAWgB,IAAY;IACrC,IAAI;QACF,OAAOC,aAAE,CAACC,QAAQ,CAACF,MAAMG,MAAM;IACjC,EAAE,OAAM;QACN,OAAO;IACT;AACF"}